<!doctype html><html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=icon href=/favicon.svg>
<meta property="og:title" content="Release dev-2021-05 (New Backend Release)">
<meta property="og:description" content="New Backend Release - https://github.com/odin-lang/Odin/releases/tag/dev-2021-05">
<meta property="og:type" content="article">
<meta property="og:url" content="https://odin-lang.org/news/dev-2021-05/">
<meta property="og:image" content="https://odin-lang.org/images/logo-slim.png">
<meta property="article:published_time" content="2021-05-01T00:00:00+00:00">
<meta property="article:modified_time" content="2021-05-01T00:00:00+00:00">
<link rel=stylesheet href=https://odin-lang.org/scss/custom.min.css>
<link rel=stylesheet href=/lib/highlight/styles/github-dark.min.css>
<script src=/lib/highlight/highlight.min.js></script>
<script>hljs.registerLanguage("odin",function(a){return{aliases:["odin","odinlang","odin-lang"],keywords:{keyword:"auto_cast bit_set break case cast context continue defer distinct do dynamic else enum fallthrough for foreign if import in map matrix not_in or_else or_return package proc return struct switch transmute type_of typeid union using when where",literal:"true false nil",built_in:"abs align_of cap clamp complex conj expand_to_tuple imag jmag kmag len max min offset_of quaternion real size_of soa_unzip soa_zip swizzle type_info_of type_of typeid_of"},illegal:"</",contains:[a.C_LINE_COMMENT_MODE,a.C_BLOCK_COMMENT_MODE,{className:"string",variants:[a.QUOTE_STRING_MODE,{begin:"'",end:"[^\\\\]'"},{begin:"`",end:"`"}]},{className:"number",variants:[{begin:a.C_NUMBER_RE+"[ijk]",relevance:1},a.C_NUMBER_MODE]}]}})</script>
<script>hljs.highlightAll()</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67516878-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-67516878-2')</script>
<link href=/css/style.css rel=stylesheet>
<title>Release dev-2021-05 (New Backend Release) | Odin Programming Language </title>
<body><header class=sticky-top>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary odin-menu">
<div class=container>
<a class=navbar-brand href=/>
<img src=/logo.svg height=30 alt=Odin></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#odin-navbar-content aria-controls=odin-navbar-content aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=odin-navbar-content>
<ul class="navbar-nav ms-md-auto">
<li class=nav-item>
<a class=nav-link href=/>Home</a>
</li>
<li class=nav-item>
<a class=nav-link href=/docs>Docs</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://pkg.odin-lang.org/>Packages</a>
</li>
<li class=nav-item>
<a class="nav-link active" href=/news aria-current=page>News</a>
</li>
<li class=nav-item>
<a class=nav-link href=/showcase>Showcase</a>
</li>
<li class=nav-item>
<a class=nav-link href=/community>Community</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://github.com/odin-lang/Odin target=_blank>GitHub</a>
</li>
</ul>
</div>
</div>
</nav>
</header>
<main>
<div class=container>
<div class="row odin-main">
<nav class="col-lg-2 odin-sidebar-border navbar-light">
<div class="sticky-top odin-below-navbar py-3">
<ul class="nav nav-pills d-flex flex-column">
<li class=nav-item>
<a class=nav-link href=/news/binding-to-c/>Binding to C</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-04/>Release dev-2022-07</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-04/>Release dev-2022-06</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-04/>Release dev-2022-05</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-04/>Release dev-2022-04</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-03/>Release dev-2022-03</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/declaration-syntax/>Odin's Declaration Syntax</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/major-graphics-apis/>Official Metal and Direct3D Support</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-02/>Release dev-2022-02</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/new-package-documentation/>New Package Documentation</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2022-01/>Release dev-2022-01</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-12/>Release dev-2021-12</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-11/>Release dev-2021-11</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-10/>Release dev-2021-10</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/optional-semicolons/>Optional Semicolons</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-09/>Release dev-2021-09</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-08/>Release dev-2021-08</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-07/>Release dev-2021-07</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/dev-2021-06/>Release dev-2021-06</a>
</li>
<li class=nav-item>
<a class="nav-link active" href=/news/dev-2021-05/ aria-current=page>Release dev-2021-05 (New Backend Release)</a>
</li>
<li class=nav-item>
<a class=nav-link href=/news/quine-in-odin/>A Quine in Odin</a>
</li>
</ul>
</div>
</nav>
<article class="col-lg-8 p-4">
<header>
<nav aria-label=breadcrumb>
<ol class=breadcrumb>
<li class=breadcrumb-item><a href=/news>News</a></li>
<li class=breadcrumb-item><a href=/dev-2021-05>Dev 2021 05</a></li>
</ol>
</nav>
<h1>Release dev-2021-05 (New Backend Release)</h1>
</header>
<div class=odin-article>
<p><a href=https://github.com/odin-lang/Odin/releases/tag/dev-2021-05>https://github.com/odin-lang/Odin/releases/tag/dev-2021-05</a></p>
<h2 id=compiler-changes>Compiler Changes <a class=text-decoration-none href=#compiler-changes>#</a></h2>
<ul>
<li>Removal of the old backend which manually produced <code>.ll</code> files and passed them to the LLVM binaries directly
<ul>
<li>Removes need for <code>llc</code> and <code>opt</code> binaries</li>
</ul>
</li>
<li>LLVM C API based backed as the main backend for all platforms and targets
<ul>
<li>Removes need for <code>-llvm-api</code></li>
</ul>
</li>
<li>Full debug symbols support for Windows (*nix is still experimental)</li>
<li>M1 ARM64/AARCH64 Support <code>-target:darwin_arm64</code></li>
<li><code>-strict-style</code> style as default
<ul>
<li><a href=https://github.com/odin-lang/Odin/issues/871>https://github.com/odin-lang/Odin/issues/871</a></li>
</ul>
</li>
<li>New Versioning System <code>dev-yyyy-mm:sha</code></li>
<li>New flags
<ul>
<li><code>-build-mode</code> modes:
<ul>
<li><code>llvm-ir</code></li>
<li><code>assembly</code></li>
</ul>
</li>
<li><code>-o:&lt;string></code> flag as an alternative to <code>-opt:&lt;integer></code>
<ul>
<li>Accepted values: <code>mininal</code>, <code>size</code>, <code>speed</code></li>
</ul>
</li>
<li><code>-vet-extra</code> for extra vet checks (many usually false positives)</li>
<li><code>-microarch:&lt;string></code></li>
<li><code>-disallow-do</code></li>
<li><code>-default-to-nil-allocator</code></li>
</ul>
</li>
<li><code>ODIN_ROOT</code> environment variable to be able to change the root directory for the Odin root path</li>
<li><code>odin test</code>
<ul>
<li>build ands runs procedures with the attribute <code>@(test)</code> in the initial package</li>
</ul>
</li>
<li><code>odin doc</code>
<ul>
<li>generate documentation from a .odin file, or directory of .odin files</li>
<li><code>-doc-format</code> Generates documentation as the .odin-doc format (useful for external tooling)</li>
</ul>
</li>
<li>Improvements to <code>-vet</code></li>
<li>Many bug fixes</li>
</ul>
<h2 id=language-changes>Language Changes <a class=text-decoration-none href=#language-changes>#</a></h2>
<ul>
<li>Ability to iterate on <code>#soa</code> types with a <code>for</code>-<code>in</code> loop</li>
<li><code>soa_zip</code> (generate #soa type from slices)</li>
<li><code>soa_unzip</code> (generate slices from #soa type)</li>
<li><code>make_soa</code> and <code>delete_soa</code></li>
<li>Allocator procedure signature change to support return a <code>[]byte</code> and <code>Allocator_Error</code> code</li>
<li>Removal of <code>intrinsics.x86_mmx</code></li>
<li>Remove <code>#opaque</code> types</li>
<li>Remove <code>bit_field</code> types
<ul>
<li>Prefer <code>bits.bitfield_extract</code> and <code>bits.bitfield_insert</code> procedures located in <code>core:math/bits</code></li>
</ul>
</li>
<li>Replace <code>inline</code> and <code>no_inline</code> with <code>#force_inline</code> and <code>#force_no_inline</code>, respectively</li>
<li>Improved <code>#optional_ok</code> logic</li>
<li>New procedure attributes:
<ul>
<li><code>@(disabled=&lt;boolean>)</code></li>
<li><code>@(cold)</code></li>
<li><code>@(optimization_mode=&lt;string>)</code></li>
</ul>
</li>
<li><code>f16</code>, <code>f16le</code>, <code>f16be</code> types</li>
<li>Removal of &ldquo;pure&rdquo; calling convention</li>
<li>Addition of &ldquo;naked&rdquo; calling convention (removes prologue and epilogue)</li>
<li><code>min(T)</code>/<code>max(T)</code> support where <code>T</code> is a float</li>
<li>Make any <code>struct</code> comparable as long as all of its fields are comparable</li>
<li>Make any comparable type a valid <code>map</code> key type</li>
<li><code>//+build ignore</code> tag
<ul>
<li>Useful for examples within a <code>package</code></li>
</ul>
</li>
</ul>
<h2 id=core-library-changes>Core Library Changes <a class=text-decoration-none href=#core-library-changes>#</a></h2>
<h3 id=new-packages>New Packages <a class=text-decoration-none href=#new-packages>#</a></h3>
<ul>
<li><code>core:bufio</code></li>
<li><code>core:bytes</code></li>
<li><code>core:c/frontend/tokenizer</code></li>
<li><code>core:c/frontend/preprocessor</code></li>
<li><code>core:compress</code></li>
<li><code>core:compress/gzip</code></li>
<li><code>core:compress/zlib</code></li>
<li><code>core:image</code></li>
<li><code>core:image/png</code></li>
<li><code>core:io</code></li>
<li><code>core:math/fixed</code></li>
<li><code>core:path</code> (URI-like paths)</li>
<li><code>core:path/filepath</code> (OS paths)</li>
<li><code>core:slice</code></li>
<li><code>core:sort</code></li>
<li><code>core:text/scanner</code></li>
</ul>
<h3 id=experimental-packages>Experimental Packages <a class=text-decoration-none href=#experimental-packages>#</a></h3>
<ul>
<li><code>core:sync/sync2</code> (will replace <code>core:sync</code> when finished)</li>
</ul>
<h3 id=new-additions-to-package-intrinsics>New Additions to <code>package intrinsics</code> <a class=text-decoration-none href=#new-additions-to-package-intrinsics>#</a></h3>
<ul>
<li><code>volatile_load</code></li>
<li><code>volatile_store</code></li>
<li><code>debug_trap</code></li>
<li><code>trap</code></li>
<li><code>alloca</code></li>
<li><code>cpu_relax</code></li>
<li><code>read_cycle_counter</code></li>
<li><code>count_ones</code></li>
<li><code>count_zeros</code></li>
<li><code>count_trailing_zeros</code></li>
<li><code>count_leading_zeros</code></li>
<li><code>reverse_bits</code></li>
<li><code>byte_swap</code></li>
<li><code>overflow_add</code></li>
<li><code>overflow_sub</code></li>
<li><code>overflow_mul</code></li>
<li><code>expect</code></li>
<li><code>type_has_field</code></li>
<li><code>type_proc_parameter_count</code></li>
<li><code>type_proc_return_count</code></li>
<li><code>type_proc_parameter_type</code></li>
<li><code>type_proc_return_type</code></li>
<li><code>type_polymorphic_record_parameter_count</code></li>
<li><code>type_polymorphic_record_parameter_value</code></li>
<li><code>type_field_index_of</code></li>
<li><code>type_equal_proc</code></li>
<li><code>type_hasher_proc</code></li>
</ul>
</div>
</article>
<div class="col-lg-2 odin-toc-border navbar-light">
<div class="sticky-top odin-below-navbar py-3">
<nav id=TableOfContents>
<ul>
<li><a href=#compiler-changes>Compiler Changes</a></li>
<li><a href=#language-changes>Language Changes</a></li>
<li><a href=#core-library-changes>Core Library Changes</a>
<ul>
<li><a href=#new-packages>New Packages</a></li>
<li><a href=#experimental-packages>Experimental Packages</a></li>
<li><a href=#new-additions-to-package-intrinsics>New Additions to <code>package intrinsics</code></a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
</div>
</main>
<footer class=odin-footer>
<div class="container pb-5 pt-5">
<div class="row g-4">
<div class=col>
<a class=navbar-brand href=/>
<img class=mb-3 src=/logo.svg height=30 alt=Odin></a>
<p>
The Data-Oriented Language for Sane Software Development.
</p>
</div>
<nav class=col-md-auto>
<h4 class=fw-normal>Resources</h4>
<ul class=list-unstyled>
<li><a href=/docs class=link-light>Docs</a></li>
<li><a href=https://pkg.odin-lang.org/ class=link-light>Packages</a></li>
<li><a href=/news class=link-light>News</a></li>
</ul>
</nav>
<nav class=col-md-auto>
<h4 class=fw-normal>Community</h4>
<ul class=list-unstyled>
<li><a href=https://github.com/odin-lang/Odin target=_blank class=link-light>GitHub</a></li>
<li><a href=https://discord.com/invite/sVBPHEv target=_blank class=link-light>Discord</a></li>
<li><a href=https://www.twitch.tv/ginger_bill target=_blank class=link-light>Twitch</a></li>
<li><a href=https://www.youtube.com/channel/UCUSck1dOH7VKmG4lRW7tZXg target=_blank class=link-light>YouTube</a></li>
<li><a href=/showcase target=_blank class=link-light>Showcase</a></li>
</ul>
</nav>
<nav class=col-md-auto>
<h4 class=fw-normal>Contribute</h4>
<ul class=list-unstyled>
<li><a href=https://github.com/odin-lang/Odin/issues target=_blank class=link-light>Issues</a></li>
<li><a href=https://www.patreon.com/gingerbill target=_blank class=link-light>Donate</a></li>
</ul>
</nav>
</div>
<div class="mt-4 text-muted">© 2016–2022 Ginger Bill</div>
</div>
</footer>
<script src=/lib/bootstrap/js/bootstrap.min.js></script>
<script src=/js/script.js></script>
</body>
</html>